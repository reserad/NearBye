{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _excluded = [\"focused\", \"index\"];\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useEffect, useRef, useState } from \"react\";\nimport KeyboardAvoidingView from \"react-native-web/dist/exports/KeyboardAvoidingView\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport View from \"react-native-web/dist/exports/View\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nexport var OTP = function OTP(props) {\n  var input = useRef(null);\n  var pinCount = props.pinCount;\n\n  var _useState = useState(new Array(pinCount).fill(\"\")),\n      _useState2 = _slicedToArray(_useState, 2),\n      otpValue = _useState2[0],\n      setOtpValue = _useState2[1];\n\n  var _useState3 = useState(0),\n      _useState4 = _slicedToArray(_useState3, 2),\n      selectedIndex = _useState4[0],\n      setSelectedIndex = _useState4[1];\n\n  var _useState5 = useState(0),\n      _useState6 = _slicedToArray(_useState5, 2),\n      nextInputIndex = _useState6[0],\n      setNextInputIndex = _useState6[1];\n\n  var handleChangeText = function handleChangeText(text, index) {\n    var newOtpValue = _toConsumableArray(otpValue);\n\n    newOtpValue[index] = text;\n    setOtpValue(newOtpValue);\n    var lastInputIndex = pinCount - 1;\n    var newInputIndex = 0;\n\n    if (!text) {\n      newInputIndex = index === 0 ? 0 : index - 1;\n    } else {\n      newInputIndex = index === lastInputIndex ? lastInputIndex : index + 1;\n    }\n\n    setNextInputIndex(newInputIndex);\n  };\n\n  useEffect(function () {\n    if (input.current) {\n      input.current.focus();\n    }\n  }, [nextInputIndex]);\n\n  var SingleOTPElement = function SingleOTPElement(props) {\n    var focused = props.focused,\n        index = props.index,\n        rest = _objectWithoutProperties(props, _excluded);\n\n    return _jsx(View, {\n      style: focused ? styles.SingleOTPElementFocused : styles.SingleOTPElement,\n      children: _jsx(TextInput, _objectSpread({\n        ref: nextInputIndex === index ? input : null,\n        keyboardType: \"numeric\",\n        textContentType: \"oneTimeCode\",\n        onChangeText: function onChangeText(text) {\n          return handleChangeText(text, index);\n        },\n        placeholder: \"0\",\n        maxLength: 1,\n        style: styles.input\n      }, rest))\n    });\n  };\n\n  return _jsx(KeyboardAvoidingView, {\n    children: _jsx(View, {\n      style: {\n        flexDirection: 'row'\n      },\n      children: _jsx(_Fragment, {\n        children: new Array(pinCount).fill(\"\").map(function (_, index) {\n          return _jsx(SingleOTPElement, {\n            index: index,\n            value: otpValue[index],\n            focused: nextInputIndex === index\n          }, \"OTP-\" + index);\n        })\n      })\n    })\n  });\n};\nvar styles = StyleSheet.create({\n  SingleOTPElement: {\n    height: 50,\n    width: 50,\n    marginHorizontal: 5,\n    borderStyle: 'solid',\n    borderWidth: 2,\n    borderColor: '#0086A4'\n  },\n  SingleOTPElementFocused: {\n    height: 50,\n    width: 50,\n    marginHorizontal: 5,\n    borderStyle: 'solid',\n    borderWidth: 2,\n    borderColor: '#240071'\n  },\n  input: {\n    flex: 1,\n    textAlign: 'center'\n  }\n});","map":{"version":3,"sources":["/Users/alecreser/Desktop/Projects/NearBye/components/OTP.tsx"],"names":["useEffect","useRef","useState","OTP","props","input","pinCount","Array","fill","otpValue","setOtpValue","selectedIndex","setSelectedIndex","nextInputIndex","setNextInputIndex","handleChangeText","text","index","newOtpValue","lastInputIndex","newInputIndex","current","focus","SingleOTPElement","focused","rest","styles","SingleOTPElementFocused","flexDirection","map","_","StyleSheet","create","height","width","marginHorizontal","borderStyle","borderWidth","borderColor","flex","textAlign"],"mappings":";;;;;;;;;;AAAA,SAASA,SAAT,EAAoBC,MAApB,EAA4BC,QAA5B,QAA4C,OAA5C;;;;;;;AAOA,OAAO,IAAMC,GAAG,GAAG,SAANA,GAAM,CAACC,KAAD,EAAqB;AACpC,MAAMC,KAAK,GAAGJ,MAAM,CAAmB,IAAnB,CAApB;AACA,MAAOK,QAAP,GAAmBF,KAAnB,CAAOE,QAAP;;AACA,kBAAgCJ,QAAQ,CAAW,IAAIK,KAAJ,CAAUD,QAAV,EAAoBE,IAApB,CAAyB,EAAzB,CAAX,CAAxC;AAAA;AAAA,MAAOC,QAAP;AAAA,MAAiBC,WAAjB;;AACA,mBAA0CR,QAAQ,CAAC,CAAD,CAAlD;AAAA;AAAA,MAAOS,aAAP;AAAA,MAAsBC,gBAAtB;;AAEA,mBAA4CV,QAAQ,CAAC,CAAD,CAApD;AAAA;AAAA,MAAOW,cAAP;AAAA,MAAuBC,iBAAvB;;AAEA,MAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACC,IAAD,EAAeC,KAAf,EAAiC;AACtD,QAAMC,WAAW,sBAAOT,QAAP,CAAjB;;AACAS,IAAAA,WAAW,CAACD,KAAD,CAAX,GAAqBD,IAArB;AACAN,IAAAA,WAAW,CAACQ,WAAD,CAAX;AAEA,QAAMC,cAAc,GAAGb,QAAQ,GAAG,CAAlC;AACA,QAAIc,aAAa,GAAG,CAApB;;AACA,QAAI,CAACJ,IAAL,EAAW;AACPI,MAAAA,aAAa,GAAGH,KAAK,KAAK,CAAV,GAAc,CAAd,GAAkBA,KAAK,GAAC,CAAxC;AACH,KAFD,MAEO;AACHG,MAAAA,aAAa,GAAGH,KAAK,KAAKE,cAAV,GAA2BA,cAA3B,GAA4CF,KAAK,GAAG,CAApE;AACH;;AAEDH,IAAAA,iBAAiB,CAACM,aAAD,CAAjB;AACH,GAdD;;AAgBApB,EAAAA,SAAS,CAAC,YAAM;AACZ,QAAIK,KAAK,CAACgB,OAAV,EAAmB;AAEfhB,MAAAA,KAAK,CAACgB,OAAN,CAAeC,KAAf;AACH;AACJ,GALQ,EAKN,CAACT,cAAD,CALM,CAAT;;AAOA,MAAMU,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACnB,KAAD,EAAkC;AACvD,QAAQoB,OAAR,GAAoCpB,KAApC,CAAQoB,OAAR;AAAA,QAAiBP,KAAjB,GAAoCb,KAApC,CAAiBa,KAAjB;AAAA,QAA2BQ,IAA3B,4BAAoCrB,KAApC;;AAEA,WACI,KAAC,IAAD;AAAM,MAAA,KAAK,EAAEoB,OAAO,GAAGE,MAAM,CAACC,uBAAV,GAAoCD,MAAM,CAACH,gBAA/D;AAAA,gBACI,KAAC,SAAD;AACI,QAAA,GAAG,EAAEV,cAAc,KAAKI,KAAnB,GAA2BZ,KAA3B,GAAmC,IAD5C;AAEI,QAAA,YAAY,EAAC,SAFjB;AAGI,QAAA,eAAe,EAAC,aAHpB;AAII,QAAA,YAAY,EAAE,sBAAAW,IAAI;AAAA,iBAAID,gBAAgB,CAACC,IAAD,EAAOC,KAAP,CAApB;AAAA,SAJtB;AAKI,QAAA,WAAW,EAAC,GALhB;AAMI,QAAA,SAAS,EAAE,CANf;AAOI,QAAA,KAAK,EAAES,MAAM,CAACrB;AAPlB,SAQQoB,IARR;AADJ,MADJ;AAcH,GAjBD;;AAmBA,SACI,KAAC,oBAAD;AAAA,cACI,KAAC,IAAD;AAAM,MAAA,KAAK,EAAE;AAACG,QAAAA,aAAa,EAAE;AAAhB,OAAb;AAAA,gBACI;AAAA,kBACK,IAAIrB,KAAJ,CAAUD,QAAV,EAAoBE,IAApB,CAAyB,EAAzB,EAA6BqB,GAA7B,CAAiC,UAACC,CAAD,EAAIb,KAAJ,EAAc;AAC5C,iBACI,KAAC,gBAAD;AAGI,YAAA,KAAK,EAAEA,KAHX;AAII,YAAA,KAAK,EAAER,QAAQ,CAACQ,KAAD,CAJnB;AAKI,YAAA,OAAO,EAAEJ,cAAc,KAAKI;AALhC,sBACgBA,KADhB,CADJ;AASH,SAVA;AADL;AADJ;AADJ,IADJ;AAoBH,CAtEM;AA+EP,IAAMS,MAAM,GAAGK,UAAU,CAACC,MAAX,CAAkB;AAChCT,EAAAA,gBAAgB,EAAE;AACXU,IAAAA,MAAM,EAAE,EADG;AAEXC,IAAAA,KAAK,EAAE,EAFI;AAGXC,IAAAA,gBAAgB,EAAE,CAHP;AAIXC,IAAAA,WAAW,EAAE,OAJF;AAKXC,IAAAA,WAAW,EAAE,CALF;AAMXC,IAAAA,WAAW,EAAE;AANF,GADc;AAS7BX,EAAAA,uBAAuB,EAAE;AACrBM,IAAAA,MAAM,EAAE,EADa;AAErBC,IAAAA,KAAK,EAAE,EAFc;AAGrBC,IAAAA,gBAAgB,EAAE,CAHG;AAIrBC,IAAAA,WAAW,EAAE,OAJQ;AAKrBC,IAAAA,WAAW,EAAE,CALQ;AAMrBC,IAAAA,WAAW,EAAE;AANQ,GATI;AAiB7BjC,EAAAA,KAAK,EAAE;AACHkC,IAAAA,IAAI,EAAE,CADH;AAEHC,IAAAA,SAAS,EAAE;AAFR;AAjBsB,CAAlB,CAAf","sourcesContent":["import { useEffect, useRef, useState } from \"react\";\nimport { KeyboardAvoidingView, StyleSheet, TextInput, View } from \"react-native\";\n\ntype OTPProps = {\n    pinCount: number;\n};\n\nexport const OTP = (props: OTPProps) => {\n    const input = useRef<TextInput | null>(null);\n    const {pinCount} = props;\n    const [otpValue, setOtpValue] = useState<string[]>(new Array(pinCount).fill(\"\"));\n    const [selectedIndex, setSelectedIndex] = useState(0);\n    //const [inputRefs, setInputRefs] = useState<(TextInput | null)[]>(new Array(pinCount).fill(null));\n    const [nextInputIndex, setNextInputIndex] = useState(0);\n\n    const handleChangeText = (text: string, index: number) => {\n        const newOtpValue = [...otpValue];\n        newOtpValue[index] = text;\n        setOtpValue(newOtpValue);\n\n        const lastInputIndex = pinCount - 1;\n        let newInputIndex = 0;\n        if (!text) {\n            newInputIndex = index === 0 ? 0 : index-1;\n        } else {\n            newInputIndex = index === lastInputIndex ? lastInputIndex : index + 1;\n        }\n        \n        setNextInputIndex(newInputIndex);\n    }\n\n    useEffect(() => {\n        if (input.current) {\n            //setTimeout(() => , 0)\n            input.current!.focus();\n        }\n    }, [nextInputIndex]);\n\n    const SingleOTPElement = (props: SingleOTPElementProps) => {\n        const { focused, index, ...rest } = props;\n    \n        return (\n            <View style={focused ? styles.SingleOTPElementFocused : styles.SingleOTPElement }>\n                <TextInput\n                    ref={nextInputIndex === index ? input : null}\n                    keyboardType=\"numeric\"\n                    textContentType=\"oneTimeCode\"\n                    onChangeText={text => handleChangeText(text, index)}\n                    placeholder=\"0\"\n                    maxLength={1}\n                    style={styles.input}\n                    {...rest}\n                />\n            </View>\n        );\n    }\n    \n    return (\n        <KeyboardAvoidingView>\n            <View style={{flexDirection: 'row'}}>\n                <>\n                    {new Array(pinCount).fill(\"\").map((_, index) => {\n                        return (\n                            <SingleOTPElement\n                                key={`OTP-${index}`}\n                                //inputRefs={inputRefs}\n                                index={index}\n                                value={otpValue[index]}\n                                focused={nextInputIndex === index}\n                            />\n                        );\n                    })}\n                </>\n            </View>\n                \n        </KeyboardAvoidingView>\n    );\n}\n\ntype SingleOTPElementProps = {\n    value: string;\n    index: number,\n    //inputRefs: (TextInput | null) [],\n    focused: boolean;\n};\n\nconst styles = StyleSheet.create({\n\tSingleOTPElement: {\n        height: 50,\n        width: 50,\n        marginHorizontal: 5,\n        borderStyle: 'solid',\n        borderWidth: 2,\n        borderColor: '#0086A4'\n\t},\n    SingleOTPElementFocused: {\n        height: 50,\n        width: 50,\n        marginHorizontal: 5,\n        borderStyle: 'solid',\n        borderWidth: 2,\n        borderColor: '#240071'\n\t},\n    input: {\n        flex: 1,\n        textAlign: 'center'\n    }\n});"]},"metadata":{},"sourceType":"module"}